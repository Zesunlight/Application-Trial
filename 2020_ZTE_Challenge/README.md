# [2020中兴捧月神算师—算法精英挑战赛](https://ztechallenge.nowcoder.com/activity/zte2020/algorithm/index)

## [傅里叶派](https://www.nowcoder.com/discuss/390140)

### 题目简化
无向二分图中求不同长度的环的个数，其中各个环的结点不能完全相同

### cycle_single

#### 思路
- 删去度为1的结点，必定不是成环结点
- 暴力DFS，以行索引为起点，环的剩余长度为1时，为结束条件
- 正向反向重复、不同起点重复，每一个环恰重复其长度次

#### 存在的问题
- 相同结点可构成不同形状的环，这里没有去除重复
- 十分耗时

### cycle_multi

#### 改进
- 基于 cycle_single
- 多进程处理，不同起点可同时进行搜索

#### 存在的问题
- 依然去重不彻底
- 时间上依然不可接受

### cycle_simplify

#### 改进
- 基于 cycle_multi
- 先行记录行索引点的2步可达点、4步可达点、6步可达点，环剩余长度为2、4、6时，判断当前点是否在可达点中
- 针对不同起点的环重复，约定环中的行索引点的值大于起点
- 记录环的路径，排序后作为元组加入集合进行去重

#### 解决程度及存在的问题
- 此时可在一小时内计算出正确答案，可通过第一阶段
- 对CPU、内存的占用量极高
- 用到了多进程，不符合官方要求
- 40分钟内无法解决第二阶段的问题

### cycle_half

#### 全新思路
- 记录行索引的2步可达点、4步可达点、6步可达点、7步可达点的所有可能路径，不同于之前只记录点
- 这些路径上没有重复点
- 同样路径中的行索引点的值大于起点
- 记录4步、6步时顺便计算了4环、6环的个数
- 依然使用环路径排序后集合去重
- 8步环采用6+2的策略，避免2+6的重复路径，约定6中起点的下一个点的值大于2中起点的下一点值
- 10步环采用6+4的策略，避重方法同上
- 12步环采用6+6的策略，采用组合的方式，从相应路径中取2条
- 14步环采用7+7的策略，采用组合的方式，从相应路径中取2条

#### 解决程度及存在的问题
- 内存占用不到5GB，CPU占用25% (i5-8400 2.8GHz)
- 第二阶段数据900s，第一阶段20s
- 未利用数据规律，奈何我没发现，直到赛后看了别人的方法

### 数据规律
- 一阶段数据可分为64*64的若干块，二阶段可分为192*192的若干块
- 块内的1是单位矩阵平移对角线得到的，excel把值为1的块染色，缩小视图后就可以看出来
- 与LDCP码相关，看了一些论文但没有大的启发

## 历程与反思
- 中途几近放弃，所幸最后找到了解决方法，虽不尽意，也还不错
- 看其他人的分享，可能一两句话就点开了思路
- 不依靠数据规律，我是不知道怎么再优化算法了，对自己挺满意了
- 还是要多思多看，发掘意想不到的关系
- 从数据本身考虑
